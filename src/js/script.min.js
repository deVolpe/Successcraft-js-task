function renderCalendar(){const e=document.getElementById("table","","");e.innerHTML="";const t=createElement("table","");e.appendChild(t);const a=createElement("tbody","");t.appendChild(a);const n=getFirstDayMonth(data.currentDate.year,data.currentDate.month),d=[];let r,l=new Date(data.currentDate.year,data.currentDate.month,1).getTime()-data.DAY*(n-1);for(let e=0;e<5;e++){const t=createElement("tr","");a.appendChild(t);for(let a=0;a<7;a++)e?(e&&!a?d[0]=new Date(l).getMonth()+1:e===data.rowTotal-1&&6===a&&(d[1]=new Date(l).getMonth()+1,d[0]===d[1]&&d.pop()),r=createElement("td","",new Date(l).getDate())):r=createElement("td","",`${data.local.week[a]}, ${new Date(l).getDate()}`),l<Date.now()-data.DAY&&(r.className="last"),eventList.forEach(e=>{e&&+e.id===l&&(r.className="active",l<Date.now()-data.DAY&&(r.className="last active"),r.innerHTML+="<br/><b>"+e.event+"</b><br/>"+e.date+"<br/>Participants:"+e.participants+"<br/>"+e.description+"<br/>")}),r.setAttribute("data-day",l),r.addEventListener("click",e=>{if(toggleDialog())return;const t=e.target;if(hasClass(t,"active")||hasClass(t,"last active")){t.className="active edit";const a=+t.getAttribute("data-day"),n=eventList.filter(e=>e.id===a)[0],d=createElement("div","add-form-edit");document.getElementById("table").appendChild(d),d.style.left=`${e.target.offsetLeft+170}px`,d.style.top=`${e.target.offsetTop-30}px`;const r=createElement("span","btn-close","x");r.addEventListener("click",()=>{data.isDialog=!1,t.className="active",d.parentNode.removeChild(d)});const l=createElement("button","btn btn-clear","Clean");l.addEventListener("click",()=>{data.isDialog=!1,d.parentNode.removeChild(d),t.innerHTML=new Date(n.id).getDate(),t.removeAttribute("class");const e=eventList.filter(e=>n.id!==e.id)[0];localStorage.setItem("events",JSON.stringify(e)||"[]")});const i=createElement("h3","",n.event),s=createElement("p","",n.date),c=createElement("p","",n.participants),o=createElement("textarea","",n.description),p=createElement("button","btn btn-add","Add");p.addEventListener("click",()=>{data.isDialog=!1,n.description=o.value,t.className="active",t.innerHTML=new Date(a).getDate()+"<br/><b>"+data.event+"</b><br/>"+data.date+"<br/>"+data.participants+"<br/>"+data.description+"<br/>",eventList.forEach((e,t)=>{e&&n.id==e.id&&(eventList[t]=n)}),localStorage.setItem("events",JSON.stringify(eventList)||"[]"),d.parentNode.removeChild(d)}),d.appendChild(r),d.appendChild(i),d.appendChild(s),d.appendChild(c),d.appendChild(o),d.appendChild(p),d.appendChild(l)}else{if(hasClass(t,"last"))return void(data.isDialog=!1);const a=createElement("div","add-form-advanced");document.getElementById("table").appendChild(a),a.style.left=e.target.offsetLeft+170+"px",a.style.top=e.target.offsetTop-30+"px";const n=createElement("span","btn-close","x");n.addEventListener("click",()=>{data.isDialog=!1,a.parentNode.removeChild(a)});const d=createElement("button","btn btn-add","Done"),r=createElement("button","btn btn-clean","Clean"),l=createElement("input","");l.setAttribute("type","hidden"),l.value=t.getAttribute("data-day");const i=createElement("input","");i.setAttribute("placeholder","Event");const s=createElement("input","");s.setAttribute("placeholder","Time");const c=createElement("input","");c.setAttribute("placeholder","Names of participants");const o=createElement("textarea","");o.setAttribute("placeholder","Description"),d.addEventListener("click",()=>{const e={id:+l.value,event:i.value,date:s.value,participants:c.value,description:o.value};data.isDialog=!1,eventList.push(e),localStorage.setItem("events",JSON.stringify(eventList)||"[]"),a.parentNode.removeChild(a),renderCalendar()}),a.appendChild(n),a.appendChild(i),a.appendChild(s),a.appendChild(c),a.appendChild(o),a.appendChild(d),a.appendChild(r)}}),t.appendChild(r),l+=data.DAY}}const data={},eventList=JSON.parse(localStorage.getItem("events"))||[];data.local={},data.local.week=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],data.local.months=["January","February","March","April","May","June","July","August","September","October","November","December"],data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},data.DAY=864e5,data.isDialog=!1;const createElement=(e,t,a=null)=>{const n=document.createElement(e);return t&&(n.className=t),a&&(n.innerHTML=a),n},displayDate=()=>{document.getElementById("current").textContent=`${data.local.months[data.currentDate.month]} ${data.currentDate.year}`},displaySearchResult=(e={display:"none"},t)=>{const a=document.getElementById("results");a.innerHTML=t,a.style.display=e.display},getFirstDayMonth=(e,t)=>{return new Date(e,t,1,0,0,0,0).getDay()},hasClass=(e,t)=>e.className.includes(t),toggleDialog=()=>!!data.isDialog||(data.isDialog=!0,!1);window.onload=(()=>{const e=document.getElementById("manage-panel");document.getElementById("search-panel");displayDate(),document.getElementById("add").addEventListener("click",()=>{if(toggleDialog())return;const t=createElement("div","add-form");e.appendChild(t);const a=createElement("span","btn-close","x"),n=createElement("button","btn btn-add","Create"),d=createElement("input");d.setAttribute("placeholder","March 5, 2.00 pm, Birthday"),n.addEventListener("click",()=>{if(!d.value)return;const a=d.value.split(","),n=(new Date).getTime(),r={};r.id=n,r.event=a[0].trim(),r.date=a[1].trim(),r.description=a[2].trim(),r.participants="No info",eventList.push(r),localStorage.events=JSON.stringify(eventList),a.isDialog=!1,e.removeChild(t)}),a.addEventListener("click",()=>{data.isDialog=!1,e.removeChild(t)}),t.appendChild(a),t.appendChild(d),t.appendChild(n)}),document.getElementById("update").addEventListener("click",()=>{location.href=location.href}),document.getElementById("next").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month>10?0:++data.currentDate.month,data.currentDate.month||data.currentDate.year++,displayDate(),renderCalendar()}),document.getElementById("prev").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month?--data.currentDate.month:11,11===data.currentDate.month&&data.currentDate.year--,displayDate(),renderCalendar()}),document.getElementById("today").addEventListener("click",()=>{data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},displayDate(),renderCalendar()}),document.getElementById("search").addEventListener("keyup",e=>{const t=e.target.value.toLowerCase(),a=eventList.map(e=>`${e.event}<br/>${e.date}`).filter(e=>e.toLowerCase().includes(t)),n=a.join("<br/><hr/>");a.length||t?displaySearchResult({display:"block"},n):displaySearchResult(),displayDate(),renderCalendar()}),renderCalendar()});