function renderCalendar(){const e=document.getElementById("table","");e.innerHTML="";const t=createElement("table","");e.appendChild(t);const a=createElement("tbody","");t.appendChild(a);const n=getFirstDayMonth(data.currentDate.year,data.currentDate.month),d=[];let r,l=new Date(data.currentDate.year,data.currentDate.month,1).getTime()-data.DAY*(n-1);for(let t=0;t<5;t++){const n=createElement("tr","");a.appendChild(n);for(let a=0;a<7;a++)t?(t&&!a?d[0]=new Date(l).getMonth()+1:t===data.rowTotal-1&&6===a&&(d[1]=new Date(l).getMonth()+1,d[0]===d[1]&&d.pop()),r=createElement("td","",new Date(l).getDate())):r=createElement("td","",`${data.local.days[a]}, ${new Date(l).getDate()}`),l<Date.now()-data.DAY&&(r.className="last"),eventList.forEach(e=>{+e.id===l&&(r.className="active",l<Date.now()-data.DAY&&(r.className="last active"),r.innerHTML+="<br/><b>"+e.event+"</b><br/>"+e.date+"<br/>"+e.participants+"<br/>"+e.description+"<br/>")}),r.setAttribute("data-day",l),r.addEventListener("click",t=>{if(toggleDialog())return;const a=t.target;if(hasClass(a,"active")||hasClass(a,"last active")){a.className="active edit";const n=+a.getAttribute("data-day"),d=eventList.filter(e=>e.id===n)[0],r=createElement("div","add-form-edit");e.appendChild(r),r.style.left=`${t.target.offsetLeft+170}px`,r.style.top=`${t.target.offsetTop-30}px`;const l=createElement("span","btn-close");l.addEventListener("click",()=>{data.isDialog=!1,a.className="active",e.removeChild(r)});const i=createElement("button","btn btn-clean","Clean");i.addEventListener("click",()=>{data.isDialog=!1,e.removeChild(r),a.innerHTML=new Date(d.id).getDate(),a.removeAttribute("class");const t=eventList.filter(e=>d.id!==e.id);localStorage.events=JSON.stringify(t)||"[]"});const s=createElement("h3","",d.event),c=createElement("p","",d.date),o=createElement("p","",`Participants:<br/>${d.participants}`),p=createElement("textarea","",d.description),m=createElement("button","btn btn-add","Edit");m.addEventListener("click",()=>{data.isDialog=!1,d.description=p.value,a.className="active",a.innerHTML=new Date(n).getDate()+"<br/><b>"+d.event+"</b><br/>"+d.date+"<br/>"+d.participants+"<br/>"+d.description+"<br/>",eventList.forEach((e,t)=>{e.id===d.id&&(eventList[t]=d)}),localStorage.events=JSON.stringify(eventList)||"[]",e.removeChild(r)}),r.appendChild(l),r.appendChild(s),r.appendChild(c),r.appendChild(o),r.appendChild(p),r.appendChild(m),r.appendChild(i)}else{if(hasClass(a,"last"))return void(data.isDialog=!1);const n=createElement("div","add-form-advanced");e.appendChild(n),n.style.left=t.target.offsetLeft+170+"px",n.style.top=t.target.offsetTop-30+"px";const d=createElement("span","btn-close");d.addEventListener("click",()=>{data.isDialog=!1,n.parentNode.removeChild(n)});const r=createElement("button","btn btn-add","Done"),l=createElement("button","btn btn-clean","Clean"),i=createElement("input","");i.setAttribute("type","hidden"),i.value=a.getAttribute("data-day");const s=createElement("input","");s.setAttribute("placeholder","Event");const c=createElement("input","");c.setAttribute("placeholder","Time");const o=createElement("input","");o.setAttribute("placeholder","Names of participants");const p=createElement("textarea","");p.setAttribute("placeholder","Description"),r.addEventListener("click",()=>{const t={id:+i.value,event:s.value,date:c.value,participants:o.value,description:p.value};data.isDialog=!1,eventList.push(t),localStorage.events=JSON.stringify(eventList)||"[]",e.removeChild(n),renderCalendar()}),n.appendChild(d),n.appendChild(s),n.appendChild(c),n.appendChild(o),n.appendChild(p),n.appendChild(r),n.appendChild(l)}}),n.appendChild(r),l+=data.DAY}}const data={},eventList=JSON.parse(localStorage.events||"[]");data.local={},data.local.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],data.local.months=["January","February","March","April","May","June","July","August","September","October","November","December"],data.local.monthList=function(){return this.months.map(e=>e.toLowerCase())},data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},data.DAY=864e5,data.isDialog=!1;const createElement=(e,t,a=null)=>{const n=document.createElement(e);return t&&(n.className=t),a&&(n.innerHTML=a),n},displayDate=()=>{document.getElementById("current").textContent=`${data.local.months[data.currentDate.month]} ${data.currentDate.year}`},displaySearchResult=(e={display:"none"},t)=>{const a=document.getElementById("results");a.innerHTML=t,a.style.display=e.display},getFirstDayMonth=(e,t)=>{return new Date(e,t,1).getDay()},hasClass=(e,t)=>e.className.includes(t),toggleDialog=()=>!!data.isDialog||(data.isDialog=!0,!1);window.onload=(()=>{const e=document.getElementById("manage-panel"),{monthList:t}=data.local,{year:a}=data.currentDate;document.getElementById("search-panel");displayDate(),document.getElementById("add").addEventListener("click",()=>{if(toggleDialog())return;const n=createElement("div","add-form");e.appendChild(n);const d=createElement("span","btn-close"),r=createElement("button","btn btn-add","Create"),l=createElement("input");l.setAttribute("placeholder","March 5, 2.00 pm, Birthday"),r.addEventListener("click",()=>{const d=l.value.split(",");if(!d.length||d.length<3)return;const r=+d[0].split(" ")[1].trim(),i=t.call(data.local).indexOf(d[0].split(" ")[0].trim().toLowerCase()),s=new Date(a,i,r).getTime(),c={};c.id=s,c.event=d[0].trim(),c.date=d[1].trim(),c.description=d[2].trim(),c.participants="No info",eventList.push(c),localStorage.events=JSON.stringify(eventList)||"[]",data.isDialog=!1,e.removeChild(n),renderCalendar()}),d.addEventListener("click",()=>{data.isDialog=!1,e.removeChild(n)}),n.appendChild(d),n.appendChild(l),n.appendChild(r)}),document.getElementById("update").addEventListener("click",()=>{location.href=location.href}),document.getElementById("next").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month>10?0:++data.currentDate.month,data.currentDate.month||data.currentDate.year++,displayDate(),renderCalendar()}),document.getElementById("prev").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month?--data.currentDate.month:11,11===data.currentDate.month&&data.currentDate.year--,displayDate(),renderCalendar()}),document.getElementById("today").addEventListener("click",()=>{data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},displayDate(),renderCalendar()}),document.getElementById("search").addEventListener("keyup",e=>{const t=e.target.value.toLowerCase(),a=eventList.map(e=>`${e.event}<br/>${e.date}`).filter(e=>e.toLowerCase().includes(t)),n=a.join("<br/><hr/>");a.length||t?displaySearchResult({display:"block"},n):displaySearchResult(),displayDate(),renderCalendar()}),renderCalendar()});