function renderCalendar(){const e=[];let t;const a=document.getElementById("table","");a.innerHTML="";const n=createElement("table","");a.appendChild(n);const d=createElement("tbody","");n.appendChild(d);const r=getFirstDayMonth(data.currentDate.year,data.currentDate.month),l=new Date(data.currentDate.year,data.currentDate.month,1).getTime();t=l-data.DAY*(r-1);for(let a=0;a<5;a++){const n=createElement("tr","");d.appendChild(n);for(let d=0;d<7;d++){if(a)a&&!d?e[0]=new Date(t).getMonth()+1:a===data.rowTotal-1&&6===d&&(e[1]=new Date(t).getMonth()+1,e[0]===e[1]&&e.pop()),i=createElement("td","",new Date(t).getDate());else var i=createElement("td","",data.local.week[d]+", "+new Date(t).getDate());t<Date.now()-data.DAY&&(i.className="last"),eventList.forEach(e=>{e&&+e.id===t&&(i.className="active",t<Date.now()-data.DAY&&(i.className="last active"),i.innerHTML+="<br/><b>"+e.event+"</b><br/>"+e.date+"<br/>"+e.names+"<br/>"+e.description+"<br/>")}),i.setAttribute("data-day",t),i.addEventListener("mousedown",function(e){const t=e.target;if(hasClass(t,"active")||hasClass(t,"last active")){t.className="active edit";const e=+t.getAttribute("data-day");let a;eventList.forEach(t=>{t&&t.id===e&&(a=t)});const n=createElement("div","add-form-edit");document.getElementById("table").appendChild(n),n.style.left=this.offsetLeft+130+"px",n.style.top=this.offsetTop-20+"px";const d=createElement("span","btn-close","x");d.addEventListener("click",e=>{t.className="active",n.parentNode.removeChild(n)});const r=createElement("button","btn-clean","Erase");r.addEventListener("click",()=>{n.parentNode.removeChild(n),t.innerHTML=new Date(a.id).getDate(),t.removeAttribute("class"),eventList.forEach((e,t)=>{e&&a.id===e.id&&eventList.splice(t,1)}),localStorage.setItem("events",JSON.stringify(eventList))});const l=createElement("h3","",a.event),i=createElement("p","",a.date),s=createElement("p","",a.names),c=createElement("textarea","");c.value=a.description;const o=createElement("button","btn-add","Add");o.addEventListener("click",()=>{a.description=c.value,t.className="active",t.innerHTML=new Date(e).getDate()+"<br/><b>"+a.event+"</b><br/>"+a.date+"<br/>"+a.names+"<br/>"+a.description+"<br/>",eventList.forEach((e,t)=>{e&&a.id==e.id&&(eventList[t]=a)}),localStorage.setItem("events",JSON.stringify(eventList)),n.parentNode.removeChild(n)}),n.appendChild(d),n.appendChild(l),n.appendChild(i),n.appendChild(s),n.appendChild(c),n.appendChild(o),n.appendChild(r)}else{if(hasClass(t,"last"))return void(data.isDialog=!1);const e=createElement("div","add-form-advanced");document.getElementById("table").appendChild(e),e.style.left=this.offsetLeft+130+"px",e.style.top=this.offsetTop-20+"px";const a=createElement("span","btn-close","x");a.addEventListener("click",()=>{e.parentNode.removeChild(e)});const n=createElement("button","btn-add","Done"),d=createElement("button","","Erase"),r=createElement("input","");r.setAttribute("type","hidden"),r.value=t.getAttribute("data-day");const l=createElement("input","field-add");l.setAttribute("placeholder","Event");const i=createElement("input","field-date");i.setAttribute("placeholder","Time");const s=createElement("input","field-name");s.setAttribute("placeholder","Participants names");const c=createElement("textarea","field-description");c.setAttribute("placeholder","Description"),n.addEventListener("click",()=>{if(!data.isDialog)return;const t={id:+r.value,event:l.value,date:i.value,names:s.value,description:c.value};data.isDialog=!1,eventList.push(t),localStorage.setItem("events",JSON.stringify(eventList)),e.parentNode.removeChild(e),_renderTable()}),e.appendChild(a),e.appendChild(l),e.appendChild(i),e.appendChild(s),e.appendChild(c),e.appendChild(n),e.appendChild(d)}}),n.appendChild(i),t+=data.DAY}}}const data={},eventList=JSON.parse(localStorage.getItem("events"))||[];data.local={},data.local.week=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],data.local.months=["January","February","March","April","May","June","July","August","September","October","November","December"],data.local.monthsList=function(){return this.months.map(e=>e.toLowerCase())},data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},data.DAY=864e5,data.isDialog=!1;const createElement=(e,t,a=null)=>{const n=document.createElement(e);return t&&(n.className=t),a&&(n.innerHTML=a),n},displayDate=()=>{document.getElementById("current").textContent=`${data.local.months[data.currentDate.month]} ${data.currentDate.year}`},displaySearchResult=(e={display:"none"},t)=>{const a=document.getElementById("results");a.innerHTML=t,a.style.display=e.display},getFirstDayMonth=(e,t)=>{return new Date(e,t,1,0,0,0,0).getDay()},hasClass=(e,t)=>e.className.includes(t);window.onload=(()=>{const e=document.getElementById("manage-panel");displayDate(),document.getElementById("add").addEventListener("click",()=>{if(!data.isDialog)return void(data.isDialog=!0);const t=createElement("div","add-form");e.appendChild(t);const a=createElement("span","btn-close","x"),n=createElement("button","btn-add","Create"),d=createElement("input");d.setAttribute("placeholder","March 5, 2.00 pm, Birthday"),n.addEventListener("click",()=>{if(!d.value)return;const a=d.value.split(","),n=(new Date).getTime(),r={};r.id=n,r.event=a[0].trim(),r.date=a[1].trim(),r.description=a[2].trim(),r.participants="No info",eventList.push(r),localStorage.events=JSON.stringify(eventList),a.isDialog=!1,e.removeChild(t)}),a.addEventListener("click",()=>{e.removeChild(t)}),t.appendChild(a),t.appendChild(d),t.appendChild(n)}),document.getElementById("update").addEventListener("click",()=>{location.href=location.href}),document.getElementById("next").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month>10?0:++data.currentDate.month,data.currentDate.month||data.currentDate.year++,displayDate()}),document.getElementById("prev").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month?--data.currentDate.month:11,11===data.currentDate.month&&data.currentDate.year--,displayDate()}),document.getElementById("today").addEventListener("click",()=>{data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},displayDate()}),document.getElementById("search").addEventListener("keyup",e=>{const t=e.target.value,a=eventList.map(e=>`${e.event}<br/>${e.date}`).filter(e=>e.toLowerCase().includes(t)),n=a.join("<br/><hr/>");a.length||t?displaySearchResult({display:"block"},n):displaySearchResult()}),renderCalendar()});