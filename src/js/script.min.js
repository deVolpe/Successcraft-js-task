function renderCalendar(){const e=[];let t;const a=document.getElementById("table","","");a.innerHTML="";const n=createElement("table","");a.appendChild(n);const d=createElement("tbody","");n.appendChild(d);const r=getFirstDayMonth(data.currentDate.year,data.currentDate.month),l=new Date(data.currentDate.year,data.currentDate.month,1).getTime();t=l-data.DAY*(r-1);for(let a=0;a<5;a++){const n=createElement("tr","");d.appendChild(n);for(let d=0;d<7;d++){if(a)a&&!d?e[0]=new Date(t).getMonth()+1:a===data.rowTotal-1&&6===d&&(e[1]=new Date(t).getMonth()+1,e[0]===e[1]&&e.pop()),i=createElement("td","",new Date(t).getDate());else var i=createElement("td","",`${data.local.week[d]}, ${new Date(t).getDate()}`);t<Date.now()-data.DAY&&(i.className="last"),eventList.forEach(e=>{e&&+e.id===t&&(i.className="active",t<Date.now()-data.DAY&&(i.className="last active"),i.innerHTML+="<br/><b>"+e.event+"</b><br/>"+e.date+"<br/>"+e.names+"<br/>"+e.description+"<br/>")}),i.setAttribute("data-day",t),i.addEventListener("click",e=>{if(toggleDialog())return;const t=e.target;if(hasClass(t,"active")||hasClass(t,"last active")){t.className="active edit";const a=+t.getAttribute("data-day");let n;eventList.forEach(e=>{e&&e.id===a&&(n=e)});const d=createElement("div","add-form-edit");document.getElementById("table").appendChild(d),d.style.left=e.target.offsetLeft+170+"px",d.style.top=e.target.offsetTop-30+"px";const r=createElement("span","btn-close","x");r.addEventListener("click",()=>{n.isDialog=!1,t.className="active",d.parentNode.removeChild(d)});createElement("button","btn btn-clear","Clean");btnErase.addEventListener("click",()=>{n.isDialog=!1,d.parentNode.removeChild(d),t.innerHTML=new Date(n.id).getDate(),t.removeAttribute("class"),eventList.forEach((e,t)=>{e&&n.id===e.id&&eventList.splice(t,1)}),localStorage.setItem("events",JSON.stringify(eventList)||"[]")});const l=createElement("h3","",n.event),i=createElement("p","",n.date),s=createElement("p","",n.names),c=createElement("textarea","");c.value=n.description;const o=createElement("button","btn btn-add","Add");o.addEventListener("click",()=>{n.isDialog=!1,n.description=c.value,t.className="active",t.innerHTML=new Date(a).getDate()+"<br/><b>"+n.event+"</b><br/>"+n.date+"<br/>"+n.names+"<br/>"+n.description+"<br/>",eventList.forEach((e,t)=>{e&&n.id==e.id&&(eventList[t]=n)}),localStorage.setItem("events",JSON.stringify(eventList)||"[]"),d.parentNode.removeChild(d)}),d.appendChild(r),d.appendChild(l),d.appendChild(i),d.appendChild(s),d.appendChild(c),d.appendChild(o),d.appendChild(btnErase)}else{if(hasClass(t,"last"))return void(data.isDialog=!1);const a=createElement("div","add-form-advanced");document.getElementById("table").appendChild(a),a.style.left=e.target.offsetLeft+170+"px",a.style.top=e.target.offsetTop-30+"px";const n=createElement("span","btn-close","x");n.addEventListener("click",()=>{data.isDialog=!1,a.parentNode.removeChild(a)});const d=createElement("button","btn btn-add","Done"),r=createElement("button","btn btn-clean","Clean"),l=createElement("input","");l.setAttribute("type","hidden"),l.value=t.getAttribute("data-day");const i=createElement("input","");i.setAttribute("placeholder","Event");const s=createElement("input","");s.setAttribute("placeholder","Time");const c=createElement("input","");c.setAttribute("placeholder","Names of participants");const o=createElement("textarea","");o.setAttribute("placeholder","Description"),d.addEventListener("click",()=>{const e={id:+l.value,event:i.value,date:s.value,names:c.value,description:o.value};data.isDialog=!1,eventList.push(e),localStorage.setItem("events",JSON.stringify(eventList)||"[]"),a.parentNode.removeChild(a),renderCalendar()}),a.appendChild(n),a.appendChild(i),a.appendChild(s),a.appendChild(c),a.appendChild(o),a.appendChild(d),a.appendChild(r)}}),n.appendChild(i),t+=data.DAY}}}const data={},eventList=JSON.parse(localStorage.getItem("events"))||[];data.local={},data.local.week=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],data.local.months=["January","February","March","April","May","June","July","August","September","October","November","December"],data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},data.DAY=864e5,data.isDialog=!1;const createElement=(e,t,a=null)=>{const n=document.createElement(e);return t&&(n.className=t),a&&(n.innerHTML=a),n},displayDate=()=>{document.getElementById("current").textContent=`${data.local.months[data.currentDate.month]} ${data.currentDate.year}`},displaySearchResult=(e={display:"none"},t)=>{const a=document.getElementById("results");a.innerHTML=t,a.style.display=e.display},getFirstDayMonth=(e,t)=>{return new Date(e,t,1,0,0,0,0).getDay()},hasClass=(e,t)=>e.className.includes(t),toggleDialog=()=>!!data.isDialog||(data.isDialog=!0,!1);window.onload=(()=>{const e=document.getElementById("manage-panel");document.getElementById("search-panel");displayDate(),document.getElementById("add").addEventListener("click",()=>{if(toggleDialog())return;const t=createElement("div","add-form");e.appendChild(t);const a=createElement("span","btn-close","x"),n=createElement("button","btn btn-add","Create"),d=createElement("input");d.setAttribute("placeholder","March 5, 2.00 pm, Birthday"),n.addEventListener("click",()=>{if(!d.value)return;const a=d.value.split(","),n=(new Date).getTime(),r={};r.id=n,r.event=a[0].trim(),r.date=a[1].trim(),r.description=a[2].trim(),r.participants="No info",eventList.push(r),localStorage.events=JSON.stringify(eventList),a.isDialog=!1,e.removeChild(t)}),a.addEventListener("click",()=>{data.isDialog=!1,e.removeChild(t)}),t.appendChild(a),t.appendChild(d),t.appendChild(n)}),document.getElementById("update").addEventListener("click",()=>{location.href=location.href}),document.getElementById("next").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month>10?0:++data.currentDate.month,data.currentDate.month||data.currentDate.year++,displayDate(),renderCalendar()}),document.getElementById("prev").addEventListener("click",()=>{data.currentDate.month=data.currentDate.month?--data.currentDate.month:11,11===data.currentDate.month&&data.currentDate.year--,displayDate(),renderCalendar()}),document.getElementById("today").addEventListener("click",()=>{data.currentDate={month:(new Date).getMonth(),year:(new Date).getFullYear()},displayDate(),renderCalendar()}),document.getElementById("search").addEventListener("keyup",e=>{const t=e.target.value.toLowerCase(),a=eventList.map(e=>`${e.event}<br/>${e.date}`).filter(e=>e.toLowerCase().includes(t)),n=a.join("<br/><hr/>");a.length||t?displaySearchResult({display:"block"},n):displaySearchResult(),displayDate(),renderCalendar()}),renderCalendar()});